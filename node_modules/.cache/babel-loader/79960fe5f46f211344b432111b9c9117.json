{"ast":null,"code":"import _regeneratorRuntime from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _initializerDefineProperty from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";import _classCallCheck from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/inherits\";import _applyDecoratedDescriptor from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";import _initializerWarningHelper from\"/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";var _class,_class2,_descriptor,_descriptor2,_descriptor3,_temp;import React from'react';import\"./Repositories.css\";import{observable,runInAction}from'mobx';import{observer}from'mobx-react';import Repository from'./Repository';import{BatchedArray,TimeUnit}from\"array-batcher\";import{ColorScheme}from'../ColorScheme';var username=\"samwilkins333\";var apiEndpoint=\"https://api.github.com/user/repos\";var Repositories=observer(_class=(_class2=(_temp=/*#__PURE__*/function(_React$Component){_inherits(Repositories,_React$Component);function Repositories(){var _getPrototypeOf2;var _this;_classCallCheck(this,Repositories);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Repositories)).call.apply(_getPrototypeOf2,[this].concat(args)));_initializerDefineProperty(_this,\"repositories\",_descriptor,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"background\",_descriptor2,_assertThisInitialized(_this));_initializerDefineProperty(_this,\"marginTop\",_descriptor3,_assertThisInitialized(_this));_this.populate=function(){var headers={Authorization:\"token \".concat(process.env.REACT_APP_GITHUB_KEY)};fetch(apiEndpoint,{headers:headers}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var repositories,mine;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.json();case 2:repositories=_context.sent;mine=repositories.filter(function(repo){return repo.full_name.startsWith(username);});_context.next=6;return BatchedArray.from(mine,{batchSize:1}).batchedForEachNaiveInterval({magnitude:100,unit:TimeUnit.Milliseconds},function(batch){runInAction(function(){var _this$repositories;return(_this$repositories=_this.repositories).push.apply(_this$repositories,_toConsumableArray(batch));});});case 6:_this.props.onLoad();_this.marginTop=3;case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.displayRepositories=function(){return _this.repositories.map(function(repo){return React.createElement(Repository,{key:repo.id,model:repo,marginTop:_this.marginTop,setSelected:_this.props.setSelected});});};return _this;}_createClass(Repositories,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:'repositories-container',onClick:function onClick(){return _this2.props.setSelected(undefined);},style:{background:this.background}},this.displayRepositories());}}]);return Repositories;}(React.Component),_temp),(_descriptor=_applyDecoratedDescriptor(_class2.prototype,\"repositories\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return[];}}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,\"background\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return ColorScheme.primary;}}),_descriptor3=_applyDecoratedDescriptor(_class2.prototype,\"marginTop\",[observable],{configurable:true,enumerable:true,writable:true,initializer:function initializer(){return 0;}})),_class2))||_class;export{Repositories as default};","map":{"version":3,"sources":["/Users/swilkinss2012/Documents/GitHub/PersonalWebsiteRework/samwilkins/src/Repositories/Repositories.tsx"],"names":["React","observable","runInAction","observer","Repository","BatchedArray","TimeUnit","ColorScheme","username","apiEndpoint","Repositories","populate","headers","Authorization","process","env","REACT_APP_GITHUB_KEY","fetch","then","response","json","repositories","mine","filter","repo","full_name","startsWith","from","batchSize","batchedForEachNaiveInterval","magnitude","unit","Milliseconds","batch","push","props","onLoad","marginTop","displayRepositories","map","id","setSelected","undefined","background","Component","primary"],"mappings":"k9DAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,oBAAP,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,MAAxC,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,OAASC,YAAT,CAAuBC,QAAvB,KAAuC,eAAvC,CACA,OAASC,WAAT,KAA4B,gBAA5B,CAEA,GAAMC,CAAAA,QAAQ,CAAG,eAAjB,CACA,GAAMC,CAAAA,WAAW,CAAG,mCAApB,C,GASqBC,CAAAA,Y,CADpBP,Q,wsBAMGQ,Q,CAAW,UAAM,CACb,GAAMC,CAAAA,OAAO,CAAG,CAAEC,aAAa,iBAAWC,OAAO,CAACC,GAAR,CAAYC,oBAAvB,CAAf,CAAhB,CACAC,KAAK,CAACR,WAAD,CAAc,CAAEG,OAAO,CAAPA,OAAF,CAAd,CAAL,CAAgCM,IAAhC,0FAAqC,iBAAMC,QAAN,8JACNA,CAAAA,QAAQ,CAACC,IAAT,EADM,QAC3BC,YAD2B,eAE3BC,IAF2B,CAEpBD,YAAY,CAACE,MAAb,CAAoB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,SAAL,CAAeC,UAAf,CAA0BlB,QAA1B,CAAJ,EAAxB,CAFoB,uBAG3BH,CAAAA,YAAY,CAACsB,IAAb,CAAkBL,IAAlB,CAAwB,CAAEM,SAAS,CAAE,CAAb,CAAxB,EAA0CC,2BAA1C,CACF,CAAEC,SAAS,CAAE,GAAb,CAAkBC,IAAI,CAAEzB,QAAQ,CAAC0B,YAAjC,CADE,CAEF,SAAAC,KAAK,CAAI,CACL/B,WAAW,CAAC,wCAAM,0BAAKmB,YAAL,EAAkBa,IAAlB,6CAA0BD,KAA1B,EAAN,EAAD,CAAX,CACH,CAJC,CAH2B,QASjC,MAAKE,KAAL,CAAWC,MAAX,GACA,MAAKC,SAAL,CAAiB,CAAjB,CAViC,sDAArC,gEAYH,C,OAEOC,mB,CAAsB,UAAM,CAChC,MAAO,OAAKjB,YAAL,CAAkBkB,GAAlB,CAAsB,SAAAf,IAAI,QAC7B,qBAAC,UAAD,EACI,GAAG,CAAEA,IAAI,CAACgB,EADd,CAEI,KAAK,CAAEhB,IAFX,CAGI,SAAS,CAAE,MAAKa,SAHpB,CAII,WAAW,CAAE,MAAKF,KAAL,CAAWM,WAJ5B,EAD6B,EAA1B,CAAP,CAQH,C,+EAEQ,iBACL,MACI,4BACI,SAAS,CAAE,wBADf,CAEI,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACN,KAAL,CAAWM,WAAX,CAAuBC,SAAvB,CAAN,EAFb,CAGI,KAAK,CAAE,CACHC,UAAU,CAAE,KAAKA,UADd,CAHX,EAOK,KAAKL,mBAAL,EAPL,CADJ,CAWH,C,0BA5CqCtC,KAAK,CAAC4C,S,kFAC3C3C,U,4FAAyC,E,4EACzCA,U,4FAAgCM,CAAAA,WAAW,CAACsC,O,2EAC5C5C,U,4FAA+B,E,+BAHfS,Y","sourcesContent":["import React from 'react';\nimport \"./Repositories.css\";\nimport { observable, runInAction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport Repository from './Repository';\nimport { BatchedArray, TimeUnit } from \"array-batcher\";\nimport { ColorScheme } from '../ColorScheme';\n\nconst username = \"samwilkins333\";\nconst apiEndpoint = \"https://api.github.com/user/repos\";\n\nexport interface RepositoriesProps {\n    onLoad: () => void;\n    setSelected: (repository: Repository | undefined) => void;\n    currentPage: number;\n}\n\n@observer\nexport default class Repositories extends React.Component<RepositoriesProps> {\n    @observable private repositories: any[] = [];\n    @observable private background = ColorScheme.primary;\n    @observable private marginTop = 0;\n\n    populate = () => {\n        const headers = { Authorization: `token ${process.env.REACT_APP_GITHUB_KEY}` };\n        fetch(apiEndpoint, { headers }).then(async response => {\n            const repositories = await response.json() as any[];\n            const mine = repositories.filter(repo => repo.full_name.startsWith(username));\n            await BatchedArray.from(mine, { batchSize: 1 }).batchedForEachNaiveInterval(\n                { magnitude: 100, unit: TimeUnit.Milliseconds },\n                batch => {\n                    runInAction(() => this.repositories.push(...batch))\n                }\n            );\n            this.props.onLoad();\n            this.marginTop = 3;\n        });\n    }\n\n    private displayRepositories = () => {\n        return this.repositories.map(repo =>\n            <Repository\n                key={repo.id}\n                model={repo}\n                marginTop={this.marginTop}\n                setSelected={this.props.setSelected}\n            />\n        );\n    }\n\n    render() {\n        return (\n            <div\n                className={'repositories-container'}\n                onClick={() => this.props.setSelected(undefined)}\n                style={{\n                    background: this.background,\n                }}\n            >\n                {this.displayRepositories()}\n            </div>\n        )\n    }\n\n}"]},"metadata":{},"sourceType":"module"}